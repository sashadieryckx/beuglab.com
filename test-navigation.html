<!DOCTYPE html>
<html>
<head>
    <title>Navigation Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-button { 
            padding: 10px 20px; 
            margin: 10px; 
            background: #007bff; 
            color: white; 
            border: none; 
            cursor: pointer; 
            border-radius: 5px;
        }
        .test-button:hover { background: #0056b3; }
        .status { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 5px; 
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>Navigation Test Script</h1>
    <p>This script will help test the navigation after multiple route changes.</p>
    
    <div class="status info">
        Open your browser console and visit <strong>http://localhost:5173/</strong> to run these tests:
    </div>

    <h2>Test Commands (Copy & paste in console):</h2>
    
    <h3>1. Test Gallery Navigation Issue:</h3>
    <pre>
// Function to specifically test Gallery navigation
async function testGalleryNavigation() {
    console.log('%c🎨 Testing Gallery Navigation Issue', 'color: blue; font-size: 16px; font-weight: bold;');
    
    // Navigate to gallery
    window.location.hash = '/gallery';
    await new Promise(resolve => setTimeout(resolve, 2000));
    
    let errors = [];
    
    // Test if navigation elements exist and are clickable
    const menuButton = document.querySelector('#menu-button');
    const navLinks = document.querySelectorAll('.menu-link, .menu-link-2');
    const dropdownMenu = document.querySelector('#dropdown-menu');
    
    console.log('Menu button found:', !!menuButton);
    console.log('Nav links count:', navLinks.length);
    console.log('Dropdown menu found:', !!dropdownMenu);
    
    // Test menu button click
    if (menuButton) {
        console.log('Testing menu button click...');
        menuButton.click();
        await new Promise(resolve => setTimeout(resolve, 1000));
        
        const isDropdownVisible = dropdownMenu && window.getComputedStyle(dropdownMenu).opacity !== '0';
        console.log('Dropdown opened:', isDropdownVisible);
        
        if (!isDropdownVisible) {
            errors.push('Dropdown menu not opening on Gallery page');
        }
        
        // Test navigation links within dropdown
        const dropdownLinks = document.querySelectorAll('.menu-link-2');
        console.log('Dropdown links found:', dropdownLinks.length);
        
        if (dropdownLinks.length > 0) {
            console.log('Testing dropdown link click...');
            dropdownLinks[0].click(); // Click Home link
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            const newUrl = window.location.hash;
            console.log('Navigation result:', newUrl);
            
            if (newUrl !== '#/' && newUrl !== '') {
                errors.push('Navigation link not working from Gallery page');
            }
        }
    } else {
        errors.push('Menu button not found on Gallery page');
    }
    
    // Test touch event conflicts
    console.log('Testing touch event conflicts...');
    const galleryContainer = document.querySelector('.carousel-container');
    if (galleryContainer) {
        // Simulate touch events
        try {
            const touchStart = new TouchEvent('touchstart', {
                bubbles: true,
                touches: [{ clientX: 100, clientY: 100 }]
            });
            const touchEnd = new TouchEvent('touchend', {
                bubbles: true,
                changedTouches: [{ clientX: 200, clientY: 100 }]
            });
            
            galleryContainer.dispatchEvent(touchStart);
            await new Promise(resolve => setTimeout(resolve, 100));
            galleryContainer.dispatchEvent(touchEnd);
            
            console.log('Touch events completed without errors');
        } catch (error) {
            errors.push(`Touch event error: ${error.message}`);
        }
    }
    
    if (errors.length === 0) {
        console.log('%c✅ Gallery navigation tests passed!', 'color: green; font-size: 16px; font-weight: bold;');
    } else {
        console.log('%c❌ Gallery navigation errors found:', 'color: red; font-size: 16px; font-weight: bold;');
        errors.forEach(error => console.log('%c' + error, 'color: red;'));
    }
}

// Run the Gallery test
testGalleryNavigation();
    </pre>

    <h3>2. Test Multiple Route Changes:</h3>
    <pre>
// Function to test navigation
async function testNavigation() {
    const routes = ['/', '/about', '/publications', '/gallery', '/about/team', '/about/dr-beug'];
    let errors = [];
    
    for (let i = 0; i < routes.length; i++) {
        try {
            console.log(`Testing route: ${routes[i]}`);
            window.location.hash = routes[i];
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // Check if navigation elements are still clickable
            const menuButton = document.querySelector('#menu-button');
            const navLinks = document.querySelectorAll('.menu-link, .menu-link-2');
            
            if (!menuButton) {
                errors.push(`Route ${routes[i]}: Menu button not found`);
            }
            
            if (navLinks.length === 0) {
                errors.push(`Route ${routes[i]}: Navigation links not found`);
            }
            
            // Test dropdown menu
            if (menuButton) {
                menuButton.click();
                await new Promise(resolve => setTimeout(resolve, 500));
                
                const dropdown = document.querySelector('#dropdown-menu');
                if (dropdown && window.getComputedStyle(dropdown).opacity === '0') {
                    errors.push(`Route ${routes[i]}: Dropdown menu not opening`);
                }
                
                // Close dropdown
                menuButton.click();
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
        } catch (error) {
            errors.push(`Route ${routes[i]}: ${error.message}`);
        }
    }
    
    if (errors.length === 0) {
        console.log('%c✅ All navigation tests passed!', 'color: green; font-size: 16px; font-weight: bold;');
    } else {
        console.log('%c❌ Navigation errors found:', 'color: red; font-size: 16px; font-weight: bold;');
        errors.forEach(error => console.log('%c' + error, 'color: red;'));
    }
}

// Run the test
testNavigation();
    </pre>

    <h3>3. Test Event Listeners:</h3>
    <pre>
// Check for duplicate event listeners and conflicts
function checkEventListeners() {
    console.log('%c🔍 Checking Event Listeners', 'color: purple; font-size: 14px; font-weight: bold;');
    
    const elements = ['#menu-button', '.menu-link-2', '.sub-toggle', '.carousel-container'];
    
    elements.forEach(selector => {
        const els = document.querySelectorAll(selector);
        els.forEach((el, index) => {
            if (typeof getEventListeners === 'function') {
                console.log(`${selector}[${index}] listeners:`, getEventListeners(el));
            } else {
                console.log(`${selector}[${index}] found:`, !!el);
            }
        });
    });
    
    // Test touch event propagation
    console.log('Testing touch event propagation...');
    const carousel = document.querySelector('.carousel-container');
    const menu = document.querySelector('#dropdown-menu');
    
    if (carousel && menu) {
        console.log('Carousel touchstart listeners:', carousel.ontouchstart ? 'Present' : 'None');
        console.log('Menu touchmove prevention active:', !document.body.style.overflow ? 'No' : 'Yes');
    }
}

checkEventListeners();
    </pre>

    <h3>4. Monitor GSAP Animations:</h3>
    <pre>
// Monitor GSAP tweens
function monitorGSAP() {
    console.log('Active GSAP tweens:', gsap.getTweensOf('*').length);
    console.log('ScrollTrigger instances:', ScrollTrigger.getAll().length);
}

// Run after each route change
setInterval(monitorGSAP, 3000);
    </pre>

</body>
</html>
